<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Changes to String in java (from 1.7.0_06) </title>
  <meta name="description" content="Hugo is a general-purpose website framework. Technically speaking, Hugo is a static site generator. Unlike systems that dynamically build a page with each visitor request, Hugo builds pages when you create or update your content. Since websites are viewed far more often than they are edited, Hugo is designed to provide an optimal viewing experience for your websiteâ€™s end users and an ideal writing experience for website authors.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Changes to String in java (from 1.7.0_06)" />
<meta property="og:description" content="Before 1.7.0_06, String has 4 non static field:
 char[] value int[] offset int count int hash  Subing.substring create a String by sharing the original String&rsquo;s internal char[] value and setting offset. This saves memory and makes String.substring run in a constant time($O(1)$). Meanwhile, this feature may cause memory leak1.
http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/8deef18bb749/src/share/classes/java/lang/String.java
public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence { /** The value is used for character storage. */ private final char value[]; /** The offset is the first index of the storage that is used." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/posts/2020-06-06-changes-in-java-string/" />
<meta property="article:published_time" content="2020-06-06T09:00:00+00:00" />
<meta property="article:modified_time" content="2020-06-06T09:00:00+00:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Changes to String in java (from 1.7.0_06)"/>
<meta name="twitter:description" content="Before 1.7.0_06, String has 4 non static field:
 char[] value int[] offset int count int hash  Subing.substring create a String by sharing the original String&rsquo;s internal char[] value and setting offset. This saves memory and makes String.substring run in a constant time($O(1)$). Meanwhile, this feature may cause memory leak1.
http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/8deef18bb749/src/share/classes/java/lang/String.java
public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence { /** The value is used for character storage. */ private final char value[]; /** The offset is the first index of the storage that is used."/>

  
  
  
    
  
  
  <link rel="stylesheet" href="https://example.com/css/style-white.css">
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://example.com/images/favicon.ico" />

  
  
  
</head>
<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://example.com/posts/2020-05-01-algorithms-graphs/">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&text=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&is_video=false&description=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29&body=Check out this article: https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-stumbleupon " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-digg " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&name=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29&description=Before%201.7.0_06%2c%20String%20has%204%20non%20static%20field%3a%0a%20char%5b%5d%20value%20int%5b%5d%20offset%20int%20count%20int%20hash%20%20Subing.substring%20create%20a%20String%20by%20sharing%20the%20original%20String%26rsquo%3bs%20internal%20char%5b%5d%20value%20and%20setting%20offset.%20This%20saves%20memory%20and%20makes%20String.substring%20run%20in%20a%20constant%20time%28%24O%281%29%24%29.%20Meanwhile%2c%20this%20feature%20may%20cause%20memory%20leak1.%0ahttp%3a%2f%2fhg.openjdk.java.net%2fjdk6%2fjdk6%2fjdk%2ffile%2f8deef18bb749%2fsrc%2fshare%2fclasses%2fjava%2flang%2fString.java%0apublic%20final%20class%20String%20implements%20java.io.Serializable%2c%20Comparable%26lt%3bString%26gt%3b%2c%20CharSequence%20%7b%20%2f%2a%2a%20The%20value%20is%20used%20for%20character%20storage.%20%2a%2f%20private%20final%20char%20value%5b%5d%3b%20%2f%2a%2a%20The%20offset%20is%20the%20first%20index%20of%20the%20storage%20that%20is%20used.">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&t=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    <div id="toc">
      <nav id="TableOfContents"></nav>
    </div>
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Changes to String in java (from 1.7.0_06)
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2020-06-06 09:00:00 &#43;0000 UTC" itemprop="datePublished">2020-06-06</time>
          
        </div>
        
        <div class="article-category">
            <i class="fas fa-archive"></i>
            
            
            <a class="category-link" href="/categories/notes">notes</a>
            
        </div>
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/algorithms" rel="tag">Algorithms</a>
            
        </div> 
        
      </div>
    </header>

  
    <div class="content" itemprop="articleBody">
      <p>Before 1.7.0_06, <code>String</code> has 4 non static field:</p>
<ul>
<li>char[] value</li>
<li>int[] offset</li>
<li>int count</li>
<li>int hash</li>
</ul>
<p><code>Subing.substring</code> create a String by sharing the original String&rsquo;s internal <code>char[] value</code> and setting offset. This saves memory and makes <code>String.substring</code> run in a constant time($O(1)$).
Meanwhile, this feature may cause <strong>memory leak</strong><sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p><a href="http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/8deef18bb749/src/share/classes/java/lang/String.java">http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/8deef18bb749/src/share/classes/java/lang/String.java</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">String</span>
    <span style="color:#66d9ef">implements</span> java<span style="color:#f92672">.</span><span style="color:#a6e22e">io</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Serializable</span><span style="color:#f92672">,</span> Comparable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;,</span> CharSequence
<span style="color:#f92672">{</span>
    <span style="color:#75715e">/** The value is used for character storage. */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">char</span> value<span style="color:#f92672">[];</span>

    <span style="color:#75715e">/** The offset is the first index of the storage that is used. */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> offset<span style="color:#f92672">;</span>

    <span style="color:#75715e">/** The count is the number of characters in the String. */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> count<span style="color:#f92672">;</span>

    <span style="color:#75715e">/** Cache the hash code for the string */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> hash<span style="color:#f92672">;</span> <span style="color:#75715e">// Default to 0
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Package private constructor which shares value array for speed.
</span><span style="color:#75715e"></span>    String<span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> offset<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> count<span style="color:#f92672">,</span> <span style="color:#66d9ef">char</span> value<span style="color:#f92672">[])</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">offset</span> <span style="color:#f92672">=</span> offset<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">count</span> <span style="color:#f92672">=</span> count<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">/**
</span><span style="color:#75715e">     * Returns a new string that is a substring of this string. The
</span><span style="color:#75715e">     * substring begins at the specified &lt;code&gt;beginIndex&lt;/code&gt; and
</span><span style="color:#75715e">     * extends to the character at index &lt;code&gt;endIndex - 1&lt;/code&gt;.
</span><span style="color:#75715e">     * Thus the length of the substring is &lt;code&gt;endIndex-beginIndex&lt;/code&gt;.
</span><span style="color:#75715e">     * &lt;p&gt;
</span><span style="color:#75715e">     * Examples:
</span><span style="color:#75715e">     * &lt;blockquote&gt;&lt;pre&gt;
</span><span style="color:#75715e">     * &#34;hamburger&#34;.substring(4, 8) returns &#34;urge&#34;
</span><span style="color:#75715e">     * &#34;smiles&#34;.substring(1, 5) returns &#34;mile&#34;
</span><span style="color:#75715e">     * &lt;/pre&gt;&lt;/blockquote&gt;
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param      beginIndex   the beginning index, inclusive.
</span><span style="color:#75715e">     * @param      endIndex     the ending index, exclusive.
</span><span style="color:#75715e">     * @return     the specified substring.
</span><span style="color:#75715e">     * @exception  IndexOutOfBoundsException  if the
</span><span style="color:#75715e">     *             &lt;code&gt;beginIndex&lt;/code&gt; is negative, or
</span><span style="color:#75715e">     *             &lt;code&gt;endIndex&lt;/code&gt; is larger than the length of
</span><span style="color:#75715e">     *             this &lt;code&gt;String&lt;/code&gt; object, or
</span><span style="color:#75715e">     *             &lt;code&gt;beginIndex&lt;/code&gt; is larger than
</span><span style="color:#75715e">     *             &lt;code&gt;endIndex&lt;/code&gt;.
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> beginIndex<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> endIndex<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>beginIndex <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>beginIndex<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>endIndex <span style="color:#f92672">&gt;</span> count<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>endIndex<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>beginIndex <span style="color:#f92672">&gt;</span> endIndex<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>endIndex <span style="color:#f92672">-</span> beginIndex<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">((</span>beginIndex <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>endIndex <span style="color:#f92672">==</span> count<span style="color:#f92672">))</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">this</span> <span style="color:#f92672">:</span>
            <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>offset <span style="color:#f92672">+</span> beginIndex<span style="color:#f92672">,</span> endIndex <span style="color:#f92672">-</span> beginIndex<span style="color:#f92672">,</span> value<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span><span style="color:#f92672">}</span>
</code></pre></div><p>Since Java 1.7.0_06, <code>offset</code> and <code>count</code> fields were removed. <code>String.substring</code> makes new copies of <code>value</code>, which means we can forget about the memory leak but the runtime becomes $O(N)$ at the same time.</p>
<p><a href="http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/String.java">http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/String.java</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Java" data-lang="Java">
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">String</span>
    <span style="color:#66d9ef">implements</span> java<span style="color:#f92672">.</span><span style="color:#a6e22e">io</span><span style="color:#f92672">.</span><span style="color:#a6e22e">Serializable</span><span style="color:#f92672">,</span> Comparable<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;,</span> CharSequence <span style="color:#f92672">{</span>
    <span style="color:#75715e">/** The value is used for character storage. */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">char</span> value<span style="color:#f92672">[];</span>

    <span style="color:#75715e">/** Cache the hash code for the string */</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> hash<span style="color:#f92672">;</span> <span style="color:#75715e">// Default to 0
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>
  <span style="color:#75715e">/**
</span><span style="color:#75715e">     * Allocates a new {@code String} that contains characters from a subarray
</span><span style="color:#75715e">     * of the character array argument. The {@code offset} argument is the
</span><span style="color:#75715e">     * index of the first character of the subarray and the {@code count}
</span><span style="color:#75715e">     * argument specifies the length of the subarray. The contents of the
</span><span style="color:#75715e">     * subarray are copied; subsequent modification of the character array does
</span><span style="color:#75715e">     * not affect the newly created string.
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param  value
</span><span style="color:#75715e">     *         Array that is the source of characters
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param  offset
</span><span style="color:#75715e">     *         The initial offset
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param  count
</span><span style="color:#75715e">     *         The length
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @throws  IndexOutOfBoundsException
</span><span style="color:#75715e">     *          If the {@code offset} and {@code count} arguments index
</span><span style="color:#75715e">     *          characters outside the bounds of the {@code value} array
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">String</span><span style="color:#f92672">(</span><span style="color:#66d9ef">char</span> value<span style="color:#f92672">[],</span> <span style="color:#66d9ef">int</span> offset<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> count<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>offset <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>offset<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>count <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>count<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#75715e">// Note: offset or count might be near -1&gt;&gt;&gt;1.
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>offset <span style="color:#f92672">&gt;</span> value<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span> <span style="color:#f92672">-</span> count<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>offset <span style="color:#f92672">+</span> count<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">copyOfRange</span><span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> offset<span style="color:#f92672">,</span> offset<span style="color:#f92672">+</span>count<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/**
</span><span style="color:#75715e">     * Returns a string that is a substring of this string. The
</span><span style="color:#75715e">     * substring begins at the specified {@code beginIndex} and
</span><span style="color:#75715e">     * extends to the character at index {@code endIndex - 1}.
</span><span style="color:#75715e">     * Thus the length of the substring is {@code endIndex-beginIndex}.
</span><span style="color:#75715e">     * &lt;p&gt;
</span><span style="color:#75715e">     * Examples:
</span><span style="color:#75715e">     * &lt;blockquote&gt;&lt;pre&gt;
</span><span style="color:#75715e">     * &#34;hamburger&#34;.substring(4, 8) returns &#34;urge&#34;
</span><span style="color:#75715e">     * &#34;smiles&#34;.substring(1, 5) returns &#34;mile&#34;
</span><span style="color:#75715e">     * &lt;/pre&gt;&lt;/blockquote&gt;
</span><span style="color:#75715e">     *
</span><span style="color:#75715e">     * @param      beginIndex   the beginning index, inclusive.
</span><span style="color:#75715e">     * @param      endIndex     the ending index, exclusive.
</span><span style="color:#75715e">     * @return     the specified substring.
</span><span style="color:#75715e">     * @exception  IndexOutOfBoundsException  if the
</span><span style="color:#75715e">     *             {@code beginIndex} is negative, or
</span><span style="color:#75715e">     *             {@code endIndex} is larger than the length of
</span><span style="color:#75715e">     *             this {@code String} object, or
</span><span style="color:#75715e">     *             {@code beginIndex} is larger than
</span><span style="color:#75715e">     *             {@code endIndex}.
</span><span style="color:#75715e">     */</span>
    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">substring</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> beginIndex<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> endIndex<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>beginIndex <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>beginIndex<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>endIndex <span style="color:#f92672">&gt;</span> value<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>endIndex<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">int</span> subLen <span style="color:#f92672">=</span> endIndex <span style="color:#f92672">-</span> beginIndex<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>subLen <span style="color:#f92672">&lt;</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> StringIndexOutOfBoundsException<span style="color:#f92672">(</span>subLen<span style="color:#f92672">);</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> <span style="color:#f92672">((</span>beginIndex <span style="color:#f92672">==</span> 0<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">(</span>endIndex <span style="color:#f92672">==</span> value<span style="color:#f92672">.</span><span style="color:#a6e22e">length</span><span style="color:#f92672">))</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">this</span>
                <span style="color:#f92672">:</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>value<span style="color:#f92672">,</span> beginIndex<span style="color:#f92672">,</span> subLen<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>
<span style="color:#f92672">}</span>
</code></pre></div><p>The auther&rsquo;s comment<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>:
<!-- raw HTML omitted -->Card<!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p><a href="http://java-performance.info/changes-to-string-java-1-7-0_06/">http://java-performance.info/changes-to-string-java-1-7-0_06/</a> <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2" role="doc-endnote">
<p><a href="https://www.reddit.com/r/programming/comments/1qw73v/til_oracle_changed_the_internal_string/cdhb77f/">https://www.reddit.com/r/programming/comments/1qw73v/til_oracle_changed_the_internal_string/cdhb77f/</a> <a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

    </div>
  </article>

  
  





  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Writings</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents"></nav>
    </div>

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&text=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&is_video=false&description=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29&body=Check out this article: https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://digg.com/submit?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&title=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-digg fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&name=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29&description=Before%201.7.0_06%2c%20String%20has%204%20non%20static%20field%3a%0a%20char%5b%5d%20value%20int%5b%5d%20offset%20int%20count%20int%20hash%20%20Subing.substring%20create%20a%20String%20by%20sharing%20the%20original%20String%26rsquo%3bs%20internal%20char%5b%5d%20value%20and%20setting%20offset.%20This%20saves%20memory%20and%20makes%20String.substring%20run%20in%20a%20constant%20time%28%24O%281%29%24%29.%20Meanwhile%2c%20this%20feature%20may%20cause%20memory%20leak1.%0ahttp%3a%2f%2fhg.openjdk.java.net%2fjdk6%2fjdk6%2fjdk%2ffile%2f8deef18bb749%2fsrc%2fshare%2fclasses%2fjava%2flang%2fString.java%0apublic%20final%20class%20String%20implements%20java.io.Serializable%2c%20Comparable%26lt%3bString%26gt%3b%2c%20CharSequence%20%7b%20%2f%2a%2a%20The%20value%20is%20used%20for%20character%20storage.%20%2a%2f%20private%20final%20char%20value%5b%5d%3b%20%2f%2a%2a%20The%20offset%20is%20the%20first%20index%20of%20the%20storage%20that%20is%20used.">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fexample.com%2fposts%2f2020-06-06-changes-in-java-string%2f&t=Changes%20to%20String%20in%20java%20%28from%201.7.0_06%29">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2020  You 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/js/main.js"></script>



</html>
